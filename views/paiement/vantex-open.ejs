<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Créer un compte VANTEX</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css" />

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Inter", sans-serif;
  background: linear-gradient(135deg, #11998e, #0575e6);
  padding: 0;
  min-height: 100vh;
}

/* CARD */
.card-wrapper {
  max-width: 1100px;
  margin: 50px auto;
  background: #fff;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 8px 28px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
}

/* IMAGE */
.card-img {
  width: 100%;
  height: 220px;
  background: url('/images/vantex.jpg') center/cover no-repeat;
  order: 2;
}

@media (min-width: 920px) {
  .card-wrapper { flex-direction: row; }
  .card-img { width: 40%; height: auto; order: 0; }
}

/* FORM */
.card { width: 100%; padding: 40px; order: 1; }
h1 { text-align:center; color:#0A9999; font-size:2rem; margin-bottom:10px; }
.subtitle { text-align:center; margin-bottom:32px; color:#555; }

/* GRID */
.form-grid { display:grid; gap:22px; }
.grid-2 { grid-template-columns:1fr; }
@media (min-width:850px) { .grid-2 { grid-template-columns:1fr 1fr; } }

/* FIELDS */
.field { position:relative; }
.field input, .field select {
  width:100%; height:50px; padding:0 14px;
  border:1.7px solid #dce3e8; border-radius:10px; background:#fff;
}
.field label {
  position:absolute; left:14px; top:-10px; background:#fff;
  padding:0 5px; font-size:0.78rem; color:#0A9999;
}

/* BUTTON */
.btn {
  width:100%; height:52px; background:#0A9999; border:none;
  border-radius:10px; color:#fff; font-size:1.08rem; cursor:pointer;
}
.btn:hover { background:#087a7a; }

/* VERIFY BLOCK */
#verify-block {
  display:none;
  padding:20px;
  background:#f5f7f8;
  border-radius:12px;
}

.verify-row {
  margin-bottom:12px;
  font-size:1rem;
  padding:10px;
  border-bottom:1px solid #ddd;
}

.verify-title {
  font-weight:600;
  color:#0575e6;
}

.actions {
  margin-top:25px;
}

#submit-final {
  background:#11998e;
}

#modify-btn {
  background:#777;
  margin-bottom:12px;
}

.conditions {
  margin:15px 0;
  font-size:0.9rem;
}

</style>
</head>

<body>

<div class="card-wrapper">

  <div class="card">

    <h1>Créer un compte VANTEX</h1>
    <p class="subtitle">Rejoignez VANTEX et profitez d’une expérience simple et sécurisée.</p>

    <!-- MODE FORMULAIRE -->
    <form id="form-mode" method="POST" enctype="multipart/form-data" action="#">
      <div class="form-grid grid-2">

        <!-- CIVILITÉ -->
        <div class="field">
          <select name="civility" required>
            <option value="" disabled selected></option>
            <option>M.</option>
            <option>Mme</option>
            <option>Mlle</option>
            <option>Dr</option>
            <option>Pr</option>
            <option>Me</option>
            <option>Ing.</option>
          </select>
          <label>Civilité</label>
        </div>

        <!-- PRÉNOM -->
        <div class="field">
          <input type="text" name="firstname" required />
          <label>Prénom</label>
        </div>

        <!-- NOM -->
        <div class="field" style="grid-column:1/-1;">
          <input type="text" name="lastname" required />
          <label>Nom</label>
        </div>

        <!-- EMAIL -->
        <div class="field">
          <input type="email" name="email" required />
          <label>Email</label>
        </div>

        <!-- PHONE -->
        <div class="field phone">
          <label style="top:-10px;">Téléphone</label>
          <input type="tel" name="phone" id="phone" required />
        </div>

        <!-- PROFESSION -->
        <div class="field" style="grid-column:1/-1;">
          <input type="text" name="profession" required />
          <label>Profession</label>
        </div>

        <!-- COUNTRY -->
        <div class="field">
          <select id="country" name="country" required></select>
          <label>Pays</label>
        </div>

        <div class="field">
          <input type="text" name="region" required />
          <label>Région</label>
        </div>

        <div class="field" style="grid-column:1/-1;">
          <input type="text" name="street" required />
          <label>Rue</label>
        </div>

        <div class="field">
          <input type="text" name="city" required />
          <label>Ville</label>
        </div>

        <div class="field">
          <input type="text" name="zip" required />
          <label>Code postal</label>
        </div>

        <div class="field" style="grid-column:1/-1;">
          <input type="file" name="id_front" accept=".jpg,.png,.jpeg,.pdf" required />
          <label>Document identité recto</label>
        </div>

        <div class="field" style="grid-column:1/-1;">
          <input type="file" name="id_back" accept=".jpg,.png,.jpeg,.pdf" required />
          <label>Document identité verso</label>
        </div>

      </div>

      <button type="button" class="btn" onclick="showVerify()">Vérifier mes informations</button>
    </form>

    <!-- MODE VÉRIFICATION -->
    <div id="verify-block">
      <h2>Vérifiez vos informations</h2>

      <div id="verify-content"></div>

      <div class="conditions">
        <input type="checkbox" id="accept" />
        <label for="accept">J’accepte les conditions générales.</label>
      </div>

      <div class="actions">
        <button id="modify-btn" class="btn" onclick="modify()">Modifier</button>
        <form method="POST" action="/paiement/vantex/submit">
          <input type="hidden" id="final-data" name="json_data" />
          <button id="submit-final" class="btn" disabled>Soumettre ma demande</button>
        </form>
      </div>
    </div>

  </div>

  <div class="card-img"></div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>

<script>
const phone = document.querySelector("#phone");
window.intlTelInput(phone, {
  separateDialCode: true,
  initialCountry: "fr",
  preferredCountries: ["fr","be","ca","ch"],
  utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js"
});

/* LOAD COUNTRIES */
async function loadCountries() {
  const res = await fetch("/json/countries.json");
  const data = await res.json();
  const sel = document.querySelector("#country");

  data.sort((a,b)=> a.name.common.localeCompare(b.name.common));
  data.forEach(c => {
    const o = document.createElement("option");
    o.value = c.name.common;
    o.textContent = c.name.common;
    sel.appendChild(o);
  });
}
loadCountries();

/* MODE VÉRIFICATION */
function showVerify() {
  const form = document.querySelector("#form-mode");
  const verify = document.querySelector("#verify-block");
  const content = document.querySelector("#verify-content");

  const fd = new FormData(form);

  let html = "";
  fd.forEach((v, k) => {
    if (k === "id_front" || k === "id_back") return;
    html += `<div class="verify-row"><span class="verify-title">${k}:</span> ${v}</div>`;
  });

  content.innerHTML = html;

  document.querySelector("#final-data").value = JSON.stringify(Object.fromEntries(fd));

  form.style.display = "none";
  verify.style.display = "block";
}

/* RETOUR EN MODE MODIFICATION */
function modify() {
  document.querySelector("#verify-block").style.display = "none";
  document.querySelector("#form-mode").style.display = "block";
}

/* ACTIVER BOUTON SOUMISSION SI CONDITIONS */
document.querySelector("#accept").addEventListener("change", e => {
  document.querySelector("#submit-final").disabled = !e.target.checked;
});
</script>

</body>
</html>




